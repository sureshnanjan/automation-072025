# -----------------------------------------------------------------------------
# Script Name  : restful-booker-crud.ps1
# Description  : Demonstrates Create, Read, Update, and Delete operations
#                on https://restful-booker.herokuapp.com using PowerShell & curl.exe.
# Author       : Shreya
# Created Date : 2025-08-12
# Version      : 1.0
#
# (c) 2025 Shreya. All rights reserved.
# This script is provided for educational and testing purposes only.
# Redistribution or modification without permission is prohibited.
# -----------------------------------------------------------------------------
**********************
Windows PowerShell transcript start
Start time: 20250812151520
Username: ASCENDI-7V67EKU\Ascendion
RunAs User: ASCENDI-7V67EKU\Ascendion
Configuration Name: 
Machine: ASCENDI-7V67EKU (Microsoft Windows NT 10.0.26100.0)
Host Application: C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe
Process ID: 9868
PSVersion: 5.1.26100.4652
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.26100.4652
BuildVersion: 10.0.26100.4652
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
Transcript started, output file is .\restful-booker-transcript.txt
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X GET "https://restful-booker.herokuapp.com/booking"
bookingid":779},{"bookingid":482},{"bookingid":134},{"bookingid":112},{"book
ingid":931},{"bookingid":932},{"bookingid":828},{"bookingid":602},{"bookingi
d":20},{"bookingid":484},{"bookingid":794},{"bookingid":37},{"bookingid":557
},{"bookingid":1009},{"bookingid":926},{"bookingid":893},{"bookingid":307},{
"bookingid":195},{"bookingid":783},{"bookingid":574},{"bookingid":370},{"boo
kingid":1027},{"bookingid":394},{"bookingid":185},{"bookingid":814},{"bookin
gid":339},{"bookingid":776},{"bookingid":391},{"bookingid":498},{"bookingid"
:318},{"bookingid":719}]
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X GET "https://restful-booker.herokuapp.com/booking?firstname=Jim"
ngid":4},{"bookingid":498}]
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X GET "https://restful-booker.herokuapp.com/booking?firstname=Grace&lastname=Wilson"
[]
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X GET "https://restful-booker.herokuapp.com/booking/1"
se,"bookingdates":{"checkin":"2023-12-03","checkout":"2025-04-07"}}
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X POST "https://restful-booker.herokuapp.com/booking" -H "Content-Type: application/json" -d "{\"firstname\":\"John\",\"lastname\":\"Smith\",\"totalprice\":111,\"depositpaid\":true,\"bookingdates\":{\"checkin\":\"2025-01-01\",\"checkout\":\"2025-01-02\"},\"additionalneeds\":\"Breakfast\"}"

PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X POST "https://restful-booker.herokuapp.com/auth" -H "Content-Type: application/json" -d "{\"username\":\"admin\",\"password\":\"password123\"}"

PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X PUT "https://restful-booker.herokuapp.com/booking/1" -u admin:password123 -H "Content-Type: application/json" -d "{\"firstname\":\"James\",\"lastname\":\"Brown\",\"totalprice\":150,\"depositpaid\":false,\"bookingdates\":{\"checkin\":\"2025-02-01\",\"checkout\":\"2025-02-05\"},\"additionalneeds\":\"Dinner\"}"

PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "firstname": "John",
  "lastname": "Smith",
  "totalprice": 111,
  "depositpaid": true,
  "bookingdates": {
    "checkin": "2025-01-01",
    "checkout": "2025-01-02"
  },
  "additionalneeds": "Breakfast"
}
'@ | Out-File booking.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X POST "https://restful-booker.herokuapp.com/booking" -H "Content-Type: application/json" --data @booking.json
At line:1 char:108
+ ... com/booking" -H "Content-Type: application/json" --data @booking.json
+                                                             ~~~~~~~~
The splatting operator '@' cannot be used to reference variables in an expression. '@booking' can be used only as an argument to a command. To reference variables in an expression use '$booking'.
At line:1 char:108
+ ... com/booking" -H "Content-Type: application/json" --data @booking.json
+                                                             ~~~~~~~~
The splatting operator '@' cannot be used to reference variables in an
expression. '@booking' can be used only as an argument to a command. To
reference variables in an expression use '$booking'.
    + CategoryInfo          : ParserError: (:) [], ParentContainsErrorReco
   rdException
    + FullyQualifiedErrorId : SplattingNotPermitted

PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X POST "https://restful-booker.herokuapp.com/booking" -H "Content-Type: application/json" --data '@booking.json'
:"2025-01-02"},"additionalneeds":"Breakfast"}}
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "username": "admin",
  "password": "password123"
}
'@ | Out-File auth.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X POST "https://restful-booker.herokuapp.com/auth" -H "Content-Type: application/json" --data '@auth.json'
{"token":"8c4d20753212cc9"}
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "firstname": "James",
  "lastname": "Brown",
  "totalprice": 150,
  "depositpaid": false,
  "bookingdates": {
    "checkin": "2025-02-01",
    "checkout": "2025-02-05"
  },
  "additionalneeds": "Dinner"
}
'@ | Out-File update_booking.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X PUT "https://restful-booker.herokuapp.com/booking/1" -u admin:password123 -H "Content-Type: application/json" --data '@update_booking.json'
Method Not Allowed
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "firstname": "Janet"
}
'@ | Out-File patch_booking.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X PATCH "https://restful-booker.herokuapp.com/booking/1" -u admin:password123 -H "Content-Type: application/json" --data '@patch_booking.json'
Method Not Allowed
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "firstname": "John",
  "lastname": "Smith",
  "totalprice": 111,
  "depositpaid": true,
  "bookingdates": {
    "checkin": "2025-01-01",
    "checkout": "2025-01-02"
  },
  "additionalneeds": "Breakfast"
}
'@ | Out-File booking.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> $createResponse = curl.exe -s -X POST "https://restful-booker.herokuapp.com/booking" -H "Content-Type: application/json" --data '@booking.json'
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> $createResponse
{"bookingid":4709,"booking":{"firstname":"John","lastname":"Smith","totalprice":111,"depositpaid":true,"bookingdates":{"checkin":"2025-01-01","checkout":"2025-01-02"},"additionalneeds":"Breakfast"}}
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "username": "admin",
  "password": "password123"
}
'@ | Out-File auth.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> $authResponse = curl.exe -s -X POST "https://restful-booker.herokuapp.com/auth" -H "Content-Type: application/json" --data '@auth.json'
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> $token = ($authResponse | ConvertFrom-Json).token
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> Write-Host "Token: $token"
Token: 62221f6aea18513
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "firstname": "James",
  "lastname": "Brown",
  "totalprice": 150,
  "depositpaid": false,
  "bookingdates": {
    "checkin": "2025-02-01",
    "checkout": "2025-02-05"
  },
  "additionalneeds": "Dinner"
}
'@ | Out-File update_booking.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X PUT "https://restful-booker.herokuapp.com/booking/YOUR_BOOKING_ID" -H "Content-Type: application/json" -H "Cookie: token=$token" --data '@update_booking.json'
Method Not Allowed
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "firstname": "Janet"
}
'@ | Out-File patch_booking.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X PATCH "https://restful-booker.herokuapp.com/booking/YOUR_BOOKING_ID" -H "Content-Type: application/json" -H "Cookie: token=$token" --data '@patch_booking.json'
Method Not Allowed
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "username": "admin",
  "password": "password123"
}
'@ | Out-File auth.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> $authResponse = curl.exe -s -X POST "https://restful-booker.herokuapp.com/auth" `
-H "Content-Type: application/json" `
--data "@auth.json"
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> $authResponse
{"token":"29af93fe80c5e77"}
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "firstname": "James",
  "lastname": "Brown",
  "totalprice": 150,
  "depositpaid": false,
  "bookingdates": {
    "checkin": "2025-02-01",
    "checkout": "2025-02-05"
  },
  "additionalneeds": "Dinner"
}
'@ | Out-File update_booking.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X PUT "https://restful-booker.herokuapp.com/booking/4709" `
-H "Content-Type: application/json" `
-H "Cookie: token=29af93fe80c5e77" `
--data "@update_booking.json"
Method Not Allowed
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X PUT "https://restful-booker.herokuapp.com/booking/4709" `
-H "Content-Type: application/json" `
-H "Accept: application/json" `
-H "Cookie: token=29af93fe80c5e77" `
--data "@update_booking.json"
Method Not Allowed
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X GET "https://restful-booker.herokuapp.com/booking/4709"
Not Found
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> # 1. Create a new booking
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "firstname": "John",
  "lastname": "Smith",
  "totalprice": 111,
  "depositpaid": true,
  "bookingdates": {
    "checkin": "2025-01-01",
    "checkout": "2025-01-02"
  },
  "additionalneeds": "Breakfast"
}
'@ | Out-File booking.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> $createResponse = curl.exe -s -X POST "https://restful-booker.herokuapp.com/booking" `
-H "Content-Type: application/json" `
--data "@booking.json"
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> $createResponse
{"bookingid":3048,"booking":{"firstname":"John","lastname":"Smith","totalprice":111,"depositpaid":true,"bookingdates":{"checkin":"2025-01-01","checkout":"2025-01-02"},"additionalneeds":"Breakfast"}}
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> @'
{
  "firstname": "James",
  "lastname": "Brown",
  "totalprice": 150,
  "depositpaid": false,
  "bookingdates": {
    "checkin": "2025-02-01",
    "checkout": "2025-02-05"
  },
  "additionalneeds": "Dinner"
}
'@ | Out-File update_booking.json -Encoding utf8
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X PUT "https://restful-booker.herokuapp.com/booking/3048" `
-H "Content-Type: application/json" `
-H "Accept: application/json" `
-H "Cookie: token=29af93fe80c5e77" `
--data "@update_booking.json"
needs":"Dinner"}
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X GET "https://restful-booker.herokuapp.com/booking/3048" `
-H "Accept: application/json"
needs":"Dinner"}
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X DELETE "https://restful-booker.herokuapp.com/booking/3048" `
-H "Cookie: token=29af93fe80c5e77"
Created
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> curl.exe -X GET "https://restful-booker.herokuapp.com/booking/3048"
Not Found
PS C:\Users\Ascendion\Desktop\apipractice\restful-booker-tests> Stop-Transcript
**********************
Windows PowerShell transcript end
End time: 20250812154017
**********************
